#!/bin/bash -eu

t01() { assert 01 "53974 52840"; }
t02() { assert 02 "2545 78111"; }
t03() { assert 03 "520019 75519888"; } 
t04() { assert 04 "20667 5833065"; }
t05() { assert 05 "403695602 219529182"; }
t06() { assert 06 "32076 34278221"; }
t07() { assert 07 "250058342 250506580"; }
t08() { assert 08 "14893 10241191004509"; }
t09() { assert 09 "1681758908 803"; }
t10() { assert 10 "6640 411"; }
t11() { assert 11 "9799681 513171773355"; }
t12() { assert 12 "7653 60681419004564"; }
t13() { assert 13 "41859 30842"; }
t14() { assert 14 "108889 104671"; }

assert() {
  echo -n "Testing $1 => $2: "
  test "$(clojure -M $1.clj)" == "$2" && echo OK || fail
}

fail() {
  echo FAIL
  exit 1
}

if [[ -n "${1:-}" ]]; then
  t$1
else
  for t in $(declare -f | grep "^t[0-9][0-9] () $" | sed 's/ .*//'); do
    $t
  done
fi
